<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Pregunta</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</head>
<body>

<h4>Preguntas SCS - C2</h4>

<form id="formulario" class="form-check">
    <div id="pregunta-container"></div>
    <button id="responder" type="submit" class="btn btn-primary">Responder</button>

</form>
    <button id="nueva" onclick="window.location.reload()" class="btn btn-primary d-none mx-4">Nueva</button>

<script>

    // Array de preguntas y respuestas
    var preguntas = [
        {
            pregunta: "En relación al derecho a la protección frente a los riesgos laborales recogido en la Ley 31/1995, de 8 de noviembre:",
        respuestas: ["El empresario desarrollará una acción temporal de seguimiento de la actividad preventiva para los riesgos que no se hayan podido evitar.", "El coste de las medidas relativas a la seguridad y salud en el trabajo no deberá recaer en modo alguno sobre el empresario.", "Es un deber de las Administraciones públicas una protección eficaz en materia de seguridad y salud en el trabajo de los trabajadores frente a los riesgos laborales, respecto del personal a su servicio.", "El concierto con entidades especializadas para el desarrollo de actividades de prevención eximen al empresario del cumplimiento del deber de protección de los trabajadores."],
            respuestaCorrecta: 2 // Índice de la respuesta correcta (empezando desde 1)
        },
        {
            pregunta: "La Ley de Prevención de Riesgos Laborales, en su artículo 15, establece los principios de la acción preventiva. Señale cuál de las siguientes respuestas no es correcta:",
            respuestas: ["Tener en cuenta la evolución de la técnica.", "Combatir los riesgos en su origen.", "Evaluar los riesgos que no se puedan evitar.", "Adoptar medidas que antepongan la protección individual a la colectiva."],
            respuestaCorrecta: 3
        },
        {
            pregunta: "¿Cuál es el elemento químico más abundante en la corteza terrestre?",
            respuestas: ["Oxígeno", "Carbono", "Hierro", "Silicio"],
            respuestaCorrecta: 0
        }
    ];

    // Función para crear el formulario de la pregunta actual
    function crearFormulario(pregunta) {
        var preguntaContainer = document.getElementById('pregunta-container');
        preguntaContainer.innerHTML = ''; // Limpiar el contenido del contenedor

        // Crear elemento de pregunta
        var preguntaElement = document.createElement('p');
        preguntaElement.textContent = pregunta.pregunta;
        preguntaContainer.appendChild(preguntaElement);

        // Crear elementos de opciones de respuesta
        pregunta.respuestas.forEach(function(respuesta, index) {
        
        	const abcd = 'ABCD';
        
            var radioLabel = document.createElement('label');
            var radioInput = document.createElement('input');
            radioInput.setAttribute('class', 'form-check-input');
            radioInput.type = 'radio';
            radioInput.name = 'respuesta';
            radioInput.value = index; // Asignar el índice de la respuesta como valor
			radioLabel.setAttribute('class',' form-check-label mb-3');
            
            radioLabel.appendChild(radioInput);
            radioLabel.id = index;
            radioLabel.appendChild(document.createTextNode(abcd.charAt(index) + ') ' + respuesta));

            preguntaContainer.appendChild(radioLabel);
            preguntaContainer.appendChild(document.createElement('br'));
        });
    }

    // Función para manejar el envío del formulario
    function handleSubmit(event) {
        event.preventDefault(); // Prevenir el envío por defecto del formulario

        var respuestaSeleccionada = document.querySelector('input[name="respuesta"]:checked');
        if (respuestaSeleccionada) {
            var respuestaUsuario = parseInt(respuestaSeleccionada.value); // Convertir el valor de la respuesta a entero
            verificarRespuesta(respuestaUsuario);
            } else {
            alert('Por favor selecciona una respuesta.');
        }
    }

    // Función para verificar la respuesta seleccionada por el usuario
    function verificarRespuesta(respuestaUsuario)
    {
    
        if (respuestaUsuario === preguntaActual.respuestaCorrecta)
        {
           //alert('¡Respuesta correcta!');
            document.getElementById(preguntaActual.respuestaCorrecta).classList.add('text-success', 'fw-bold');
           
        } 
        else
        {
         document.getElementById(preguntaActual.respuestaCorrecta).classList.add('fw-bold');
         document.getElementById(respuestaUsuario).classList.add('text-danger', 'fw-bold');
            //alert('Respuesta incorrecta. La respuesta correcta es la opción ' + (preguntaActual.respuestaCorrecta + 1));
        }
         document.getElementById('responder').classList.add('d-none');
         document.getElementById('nueva').classList.remove('d-none');
                    document.getElementById(preguntaActual.respuestaCorrecta).classList.add('fw-bold');
    }

    // Obtener una pregunta aleatoria
    var preguntaActual = preguntas[Math.floor(Math.random() * preguntas.length)];

    // Crear el formulario con la pregunta actual
    crearFormulario(preguntaActual);

    // Agregar un evento de escucha para el envío del formulario
    var formulario = document.getElementById('formulario');
    formulario.addEventListener('submit', handleSubmit);
    
    document.getElementByID('nueva').onclick = function()
    { 
    	location.reload();
    };


</script>

</body>
</html>
