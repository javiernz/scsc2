<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Pregunta</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</head>
<body>

<h4>Preguntas SCS - C2</h4>

<form id="formulario" class="form-check">
    <div id="pregunta-container"></div>
    <button id="responder" type="submit" class="btn btn-primary">Responder</button>

</form>
    <button id="nueva" onclick="window.location.reload()" class="btn btn-primary d-none mx-4">Nueva</button>

<script>

    // Array de preguntas y respuestas
    var preguntas = [
        {
            pregunta: "1. En relación al derecho a la protección frente a los riesgos laborales recogido en la Ley 31/1995, de 8 de noviembre:",
            respuestas: ["El empresario desarrollará una acción temporal de seguimiento de la actividad preventiva para los riesgos que no se hayan podido evitar.",
			 "El coste de las medidas relativas a la seguridad y salud en el trabajo no deberá recaer en modo alguno sobre el empresario.", 
			 "Es un deber de las Administraciones públicas una protección eficaz en materia de seguridad y salud en el trabajo de los trabajadores frente a los riesgos laborales, respecto del personal a su servicio.", 
			 "El concierto con entidades especializadas para el desarrollo de actividades de prevención eximen al empresario del cumplimiento del deber de protección de los trabajadores."],
            respuestaCorrecta: 2 // Índice de la respuesta correcta (empezando desde 1)
        },
        {
            pregunta: "2. La Ley de Prevención de Riesgos Laborales, en su artículo 15, establece los principios de la acción preventiva. Señale cuál de las siguientes respuestas no es correcta:",
            respuestas: ["Tener en cuenta la evolución de la técnica.", 
			 "Combatir los riesgos en su origen.", 
			 "Evaluar los riesgos que no se puedan evitar.", 
			 "Adoptar medidas que antepongan la protección individual a la colectiva."],
            respuestaCorrecta: 3
        }
        ,{
            pregunta: "3. Según la Ley 31/1995, de 8 de noviembre, el empresario deberá realizar una evaluación inicial de riesgos para la seguridad y salud de los trabajadores teniendo en cuenta:",
            respuestas: ["Las características de los puestos de trabajo existentes y de los trabajadores que deban desempeñarlos.", 
			 "La elección de los equipos de trabajo, de las sustancias o preparados químicos.", 
			 "El acondicionamiento de los lugares de trabajo.", 
			 "Todas son correctas."],
            respuestaCorrecta: 3
        }
	,{
            pregunta: "4. Según la Ley 31/1995, de 8 de noviembre, cuando la utilización de un equipo de trabajo pueda presentar un riesgo específico para la seguridad y salud de los trabajadores, el empresario adoptará las medidas necesarias con el fin de que:",
            respuestas: ["La utilización del equipo de trabajo quede reservada a los encargados de dicha utilización.", 
			 "Los trabajos de reparación, transformación, mantenimiento o conservación sean realizados por todos los trabajadores.", 
			 "Los trabajos de reparación, transformación, mantenimiento o conservación sean realizados por el coordinador de seguridad y salud.", 
			 "Ninguna es correcta."],
            respuestaCorrecta: 0
        }
	,{
            pregunta: "5. Respecto a la información, consulta y participación de los trabajadores, según la ley 31/1995, de 8 de noviembre de prevención de Riesgos Laborales:",
            respuestas: ["Los trabajadores tienen la obligación de efectuar propuestas al empresario dirigidas a la mejora de los niveles de protección de la seguridad y la salud en la empresa.", 
			 "El empresario deberá asumir todas las iniciativas que los trabajadores tengan respecto la prevención de riesgos laborales.", 
			 "En las empresas que cuenten con representantes de los trabajadores, no es necesario informar directamente a cada trabajador de los riesgos específicos que afecten a su puesto de trabajo.", 
			 "El empresario deberá consultar a los trabajadores, y permitir su participación, en el marco de todas las cuestiones que afecten a la seguridad y a la salud en el trabajo."],
            respuestaCorrecta: 3
        }
	,{
            pregunta: "6. Según la Ley 31/1995, de 8 de noviembre, la formación del trabajador en materia preventiva deberá impartirse:",
            respuestas: ["Siempre, dentro de la jornada de trabajo.", 
			 "Repartiendo proporcionalmente el coste de la formación en materia de prevención entre el empresario y el trabajador.", 
			 "Se impartirá únicamente a los trabajadores con contrato indefinido.", 
			 "Su coste no recaerá en ningún caso sobre los trabajadores."],
            respuestaCorrecta: 3
        }
	,{
	    pregunta: "7. Según la Ley 31/1995, de 8 de noviembre, de prevención de Riesgos Laborales, cuando los trabajadores estén o puedan estar expuestos a un riesgo grave e inminente con ocasión de su trabajo, el empresario está obligado a:",
            respuestas: ["Adoptar las medidas y dar las instrucciones necesarias para que los trabajadores no abandonen de inmediato el lugar de trabajo.", 
			 "Informar lo antes posible a todos los trabajadores afectados acerca de la existencia de dicho riesgo y de las medidas adoptadas o que, en su caso, deban adoptarse en materia de protección.", 
			 "A sancionar a los trabajadores o sus representantes en caso de haber obrado de buena fe o cometido negligencia leve en la adopción de medidas.", 
			 "Exigir a los trabajadores que reanuden su actividad, aún persistiendo el peligro, salvo excepción debidamente justificada por razones de seguridad y determinada reglamentariamente."],
            respuestaCorrecta: 1
        }	    
	,{
	    pregunta: "8. Según la Ley 31/1995, de 8 de noviembre, cuando el empresario no adopte o no permita la adopción de las medidas necesarias para garantizar la seguridad y la salud de los trabajadores:",
            respuestas: ["Cualquier representante legal de los trabajadores podrá decidir la paralización de la actividad de los trabajadores afectados por el riesgo grave e inminente.", 
			 "Los representantes legales de los trabajadores deberán comunicar a la Autoridad Laboral la situación de riesgo grave e inminente para que esta adopte, en el plazo máximo de cuarenta y ocho horas, las medidas oportunas.", 
			 "Los representantes legales de los trabajadores podrán acordar, por mayoría de sus miembros, la paralización de la actividad de los trabajadores afectados por dicho riesgo.", 
			 "Los trabajadores afectados deberán presentar demanda por el incumplimiento del empresario ante el Juzgado de los contencioso-administrativo."],
            respuestaCorrecta: 2
        }
	,{
	    pregunta: "9. Dispone el artículo 22 de la Ley de Prevención de riesgos laborales respecto a la vigilancia de la salud:",
            respuestas: ["El empresario garantizará a los trabajadores a su servicio la vigilancia periódica de su estado de salud, con independencia de los riesgos inherentes al trabajo.", 
			 "Esta vigilancia sólo podrá llevarse a cabo cuando el trabajador preste su consentimiento, sin excepciones.", 
			 "Los resultados de dicha vigilancia serán comunicados únicamente al médico facultativo.", 
			 "Los datos relativos a la vigilancia de la salud de los trabajadores no podrán ser usados con fines discriminatorios ni en perjuicio del trabajador."],
            respuestaCorrecta: 3
        }
	,{
	    pregunta: "10. Según la Ley 31/1995, de 8 de noviembre, de prevención de Riesgos Laborales, el empresario deberá elaborar y conservar a disposición de la autoridad laboral la siguiente documentación:",
            respuestas: ["Plan de prevención de riesgos laborales conforme a lo previsto en el apartado 1 del artículo 16 de esta ley.", 
			 "Evaluación de los riesgos para la seguridad y la salud, sin incluir el resultado de los controles periódicos de las condiciones de trabajos.", 
			 "Relación de accidentes de trabajo y enfermedades comunes que hayan causado al trabajador una incapacidad laboral superior a tres días de trabajo.", 
			 "Ninguna es correcta."],
            respuestaCorrecta: 0
        }
	,{
	    pregunta: " ",
            respuestas: [" ", 
			 " ", 
			 " ", 
			 " "],
            respuestaCorrecta: 0
        }
    ];

    // Función para crear el formulario de la pregunta actual
    function crearFormulario(pregunta) {
        var preguntaContainer = document.getElementById('pregunta-container');
        preguntaContainer.innerHTML = ''; // Limpiar el contenido del contenedor

        // Crear elemento de pregunta
        var preguntaElement = document.createElement('p');
        preguntaElement.textContent = pregunta.pregunta;
        preguntaContainer.appendChild(preguntaElement);

        // Crear elementos de opciones de respuesta
        pregunta.respuestas.forEach(function(respuesta, index) {
        
        	const abcd = 'ABCD';
        
            var radioLabel = document.createElement('label');
            var radioInput = document.createElement('input');
            radioInput.setAttribute('class', 'form-check-input');
            radioInput.type = 'radio';
            radioInput.name = 'respuesta';
            radioInput.value = index; // Asignar el índice de la respuesta como valor
	    
	    radioLabel.setAttribute('class',' form-check-label m-3');
            radioLabel.appendChild(radioInput);
            radioLabel.id = index;
            radioLabel.appendChild(document.createTextNode(abcd.charAt(index) + ') ' + respuesta));

            preguntaContainer.appendChild(radioLabel);
            preguntaContainer.appendChild(document.createElement('br'));
        });
    }

    // Función para manejar el envío del formulario
    function handleSubmit(event) {
        event.preventDefault(); // Prevenir el envío por defecto del formulario

        var respuestaSeleccionada = document.querySelector('input[name="respuesta"]:checked');
        if (respuestaSeleccionada) {
            var respuestaUsuario = parseInt(respuestaSeleccionada.value); // Convertir el valor de la respuesta a entero
            verificarRespuesta(respuestaUsuario);
            } else {
            alert('Por favor selecciona una respuesta.');
        }
    }

    // Función para verificar la respuesta seleccionada por el usuario
    function verificarRespuesta(respuestaUsuario)
    {
    
        if (respuestaUsuario === preguntaActual.respuestaCorrecta)
        {
           //alert('¡Respuesta correcta!');
            document.getElementById(preguntaActual.respuestaCorrecta).classList.add('text-success', 'fw-bold');
           
        } 
        else
        {
         document.getElementById(preguntaActual.respuestaCorrecta).classList.add('fw-bold');
         document.getElementById(respuestaUsuario).classList.add('text-danger', 'fw-bold');
            //alert('Respuesta incorrecta. La respuesta correcta es la opción ' + (preguntaActual.respuestaCorrecta + 1));
        }
         document.getElementById('responder').classList.add('d-none');
         document.getElementById('nueva').classList.remove('d-none');
                    document.getElementById(preguntaActual.respuestaCorrecta).classList.add('fw-bold');
    }

    // Obtener una pregunta aleatoria
    var preguntaActual = preguntas[Math.floor(Math.random() * preguntas.length)];

    // Crear el formulario con la pregunta actual
    crearFormulario(preguntaActual);

    // Agregar un evento de escucha para el envío del formulario
    var formulario = document.getElementById('formulario');
    formulario.addEventListener('submit', handleSubmit);
    
    document.getElementByID('nueva').onclick = function()
    { 
    	location.reload();
    };


</script>

</body>
</html>
